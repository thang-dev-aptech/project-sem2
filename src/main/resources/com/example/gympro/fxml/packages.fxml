<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import java.lang.String?>

<!--
  ÄÃƒ Sá»¬A Láº I:
  1. Thay Ä‘á»•i SplitPane sang chiá»u dá»c (orientation="VERTICAL").
  2. Bá»‘ cá»¥c sáº½ lÃ  HÃ ng TrÃªn (Báº£ng) vÃ  HÃ ng DÆ°á»›i (Chi tiáº¿t).
  3. XÃ³a minWidths, thÃªm minHeight (tÃ¹y chá»n) Ä‘á»ƒ Ä‘áº£m báº£o ná»™i dung hiá»ƒn thá»‹.
-->

<ScrollPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.gympro.controller.PackagesController"
            stylesheets="@../css/styles.css" fitToWidth="true" styleClass="dashboard-scroll">

    <VBox spacing="20" styleClass="dashboard-container">
        <padding>
            <Insets top="30" left="30" right="30" bottom="10"/>
        </padding>

        <!-- HEADER (Giá»¯ nguyÃªn) -->
        <VBox spacing="5">
            <Label text="Quáº£n lÃ½ GÃ³i táº­p" styleClass="page-title"/>
            <Label text="Táº¡o vÃ  quáº£n lÃ½ cÃ¡c gÃ³i táº­p thÃ nh viÃªn." styleClass="page-subtitle"/>
        </VBox>

        <!-- TOOLBAR (Giá»¯ nguyÃªn) -->
        <ToolBar styleClass="tool-bar">
            <items>
                <TextField promptText="ðŸ” TÃ¬m kiáº¿m gÃ³i táº­p..." fx:id="searchField" prefWidth="250" onKeyReleased="#handleFilter"/>
                <ComboBox fx:id="statusFilter" promptText="ðŸ“Š Tráº¡ng thÃ¡i" prefWidth="120"/>
                <Separator orientation="VERTICAL"/>
                <Button text="âž• ThÃªm gÃ³i" styleClass="icon-button, success" onAction="#handleNewPackage"/>
                <Button text="ðŸ”„ LÃ m má»›i" styleClass="icon-button" onAction="#loadPackages"/>
                <Button text="ðŸ“¤ Xuáº¥t Excel" styleClass="icon-button" disable="true"/>
            </items>
        </ToolBar>

        <!--
          SPLIT PANE (CHIA Dá»ŒC)
          - orientation="VERTICAL"
          - dividerPositions="0.60" (60% cho hÃ ng trÃªn, 40% cho hÃ ng dÆ°á»›i)
        -->
        <SplitPane VBox.vgrow="ALWAYS" dividerPositions="0.45" orientation="VERTICAL" styleClass="main-split-pane">

            <!-- HÃ€NG 1: TABLE VIEW (Danh sÃ¡ch GÃ³i táº­p) -->
            <VBox spacing="10" styleClass="card, table-view-container" minHeight="400">
                <Label text="Báº£ng danh sÃ¡ch gÃ³i táº­p" styleClass="card-title"/>
                <TableView fx:id="packagesTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn text="MÃ£" prefWidth="100" fx:id="colCode"/>
                        <TableColumn text="TÃªn gÃ³i" prefWidth="150" fx:id="colName"/>
                        <TableColumn text="Thá»i háº¡n" prefWidth="80" fx:id="colDuration"/>
                        <TableColumn text="GiÃ¡" prefWidth="120" fx:id="colPrice"/>
                        <TableColumn text="Tráº¡ng thÃ¡i" prefWidth="100" fx:id="colStatus"/>
                        <TableColumn text="MÃ´ táº£" prefWidth="200" fx:id="colDescription"/>
                        <TableColumn text="Created At" prefWidth="150" fx:id="colCreatedAt"/>
                        <TableColumn text="Updated At" prefWidth="150" fx:id="colUpdatedAt"/>
                        <TableColumn text="HÃ nh Ä‘á»™ng" prefWidth="100" fx:id="colActions"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- HÃ€NG 2: FORM CHI TIáº¾T (Bá»‘ cá»¥c VBox) -->
            <VBox fx:id="detailPane" spacing="15" styleClass="card" minHeight="300">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>

                <Label fx:id="formTitle" text="Chi tiáº¿t GÃ³i táº­p" styleClass="card-title"/>
                <Separator styleClass="form-separator"/>

                <!-- FORM INPUTS (GridPane) -->
                <GridPane hgap="10" vgap="10">
                    <columnConstraints>
                        <!-- Chia 3 cá»™t cho form ngang -->
                        <ColumnConstraints percentWidth="15"/>
                        <ColumnConstraints percentWidth="35"/>
                        <ColumnConstraints percentWidth="15"/>
                        <ColumnConstraints percentWidth="35"/>
                    </columnConstraints>

                    <!-- Cá»™t 1 -->
                    <Label text="MÃ£ Code:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <TextField fx:id="codeField" promptText="VÃ­ dá»¥: PLAN-001" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                    <Label text="TÃªn GÃ³i:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <TextField fx:id="nameField" promptText="GÃ³i 1 thÃ¡ng" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                    <Label text="Tráº¡ng thÃ¡i:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <HBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="2">
                        <CheckBox fx:id="isActiveCheckbox" text="ðŸŸ¢ Hiá»ƒn thá»‹"/>
                    </HBox>

                    <!-- Cá»™t 2 -->
                    <Label text="GiÃ¡ (VND):" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                    <TextField fx:id="priceField" promptText="500000" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                    <Label text="Thá»i háº¡n (NgÃ y):" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                    <TextField fx:id="durationField" promptText="30" GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                    <!-- MÃ´ táº£ chiáº¿m cáº£ 4 cá»™t -->
                    <Label text="MÃ´ táº£:" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                    <TextArea fx:id="descriptionArea" wrapText="true" prefHeight="80"
                              GridPane.columnIndex="1" GridPane.rowIndex="3"
                              GridPane.columnSpan="3"/>
                </GridPane>

                <!--
                  Sá»¬A Láº I: ThÃªm VBox.margin vá»›i top margin Ã¢m Ä‘á»ƒ giáº£m khoáº£ng cÃ¡ch
                -->
                <HBox spacing="10" alignment="CENTER_RIGHT" styleClass="button-group">
                    <Button fx:id="deleteButton" text="XÃ³a" styleClass="delete-button" onAction="#handleDelete"/>
                    <Button text="Há»§y" styleClass="secondary-button" onAction="#handleCancel"/>
                    <Button fx:id="saveButton" text="LÆ°u" styleClass="primary-button" onAction="#handleSave"/>
                </HBox>
            </VBox>
        </SplitPane>
    </VBox>
</ScrollPane>

